"use strict";function asyncGeneratorStep(e,t,n,o,r,i,c){try{var a=e[i](c),s=a.value}catch(e){return void n(e)}a.done?t(s):Promise.resolve(s).then(o,r)}function _asyncToGenerator(e){return function(){var t=this,n=arguments;return new Promise((function(o,r){var i=e.apply(t,n);function c(e){asyncGeneratorStep(i,o,r,c,a,"next",e)}function a(e){asyncGeneratorStep(i,o,r,c,a,"throw",e)}c(void 0)}))}}document.addEventListener("DOMContentLoaded",(function(){function e(e,t){if(e)for(var n=0;n<e.length;n++)e[n].classList.remove(t)}var t,n,o=document.querySelector("html"),r={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return r.Android()||r.BlackBerry()||r.iOS()||r.Opera()||r.Windows()}};r.any()?o.classList.add("_touch"):o.classList.add("_pc"),t=o,(n=new Image).src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA",n.onload=n.onerror=function(){2===n.height?t.classList.add("_webp"):t.classList.add("_no-webp")},!1==(window.navigator.userAgent.indexOf("MSIE ")>-1||window.navigator.userAgent.indexOf("Trident/")>-1)||(alert("Ваш браузер не поддерживается, страница может отображаться некорректно!"),o.classList.add("_ie"));var i=document.querySelector("body"),c=document.querySelectorAll(".lock-padding"),a=!0;function s(){var e=window.innerWidth-document.querySelector("._body-wrapper").offsetWidth+"px";if(c.length>0)for(var t=0;t<c.length;t++){c[t].style.paddingRight=e}i.style.paddingRight=e,i.classList.add("_lock"),a=!1,setTimeout((function(){a=!0}),10)}function l(){setTimeout((function(){if(c.length>0)for(var e=0;e<c.length;e++){c[e].style.paddingRight="0px"}i.style.paddingRight="0px",i.classList.remove("_lock")}),0),a=!1,setTimeout((function(){a=!0}),10)}var d=".header__top";!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:".icon-menu",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:".menu__body",n=document.querySelector(e),o=document.querySelector(t);n&&o&&n.addEventListener("click",(function(e){n.classList.contains("_active")?(n.classList.remove("_active"),o.classList.remove("_active"),l()):(n.classList.add("_active"),o.classList.add("_active"),s())}))}(),function(){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"a[data-goto]",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".icon-menu",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:".menu__body",r=document.querySelectorAll(t),i=document.querySelector(n),c=document.querySelector(o);r.length>0&&r.forEach((function(t){t.addEventListener("click",(function(t){var n=t.target;if(n.dataset.goto&&document.querySelector(n.dataset.goto)){var o=document.querySelector(n.dataset.goto).getBoundingClientRect().top+pageYOffset;i.classList.contains("_active")&&(l(),i.classList.remove("_active"),c.classList.remove("_active")),document.querySelectorAll("._hover")&&e(document.querySelectorAll("._hover"),"_hover"),window.scrollTo({top:o,behavior:"smooth"}),t.preventDefault()}}))}))}(d),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:".header",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,n=0,o=document.querySelector(e),r=t,i=function(){return window.pageYOffset||document.documentElement.scrollTop},c=function(){return o.classList.contains("_hide")};o&&window.addEventListener("scroll",(function(){i()>n&&!c()&&o.classList.add("_vis"),i()>n&&!c()&&i()>r&&o.classList.add("_hide"),i()<n&&c()&&o.classList.remove("_hide"),0==i()&&o.classList.remove("_vis"),n=i()}))}(d,300);var u=document.querySelectorAll(".popup-link");if(u.length>0)for(var m=function(e){var t=u[e];t.addEventListener("click",(function(e){var n=t.getAttribute("href").replace("#","");h(document.getElementById(n)),e.preventDefault()}))},v=0;v<u.length;v++)m(v);var f=document.querySelectorAll(".popup__close");if(f.length>0)for(var p=function(e){var t=f[e];t.addEventListener("click",(function(e){y(t.closest(".popup")),e.preventDefault()}))},g=0;g<f.length;g++)p(g);function h(e){if(e&&a){var t=document.querySelector(".popup.open");t?y(t,!1):s(),e.classList.add("open"),e.addEventListener("click",(function(e){e.target.closest(".popup__content")||y(e.target.closest(".popup"))}))}}function y(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];a&&(e.classList.remove("open"),t&&l())}document.addEventListener("keydown",(function(e){"Escape"===e.key&&y(document.querySelector(".popup.open"))})),Element.prototype.closest||(Element.prototype.closest=function(e){for(var t=this;t;){if(t.matches(e))return t;t=t.parentElement}return null}),Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector);var _=document.getElementById("form");function L(e){for(var t=0,n=document.querySelectorAll("._req"),o=0;o<n.length;o++){var r=n[o];S(r),r.classList.contains("_email")?w(r)&&(A(r),t++):("checkbox"===r.getAttribute("type")&&!1===r.checked||""===r.value)&&(A(r),t++)}return t}function A(e){e.parentElement.classList.add("_error"),e.classList.add("_error")}function S(e){e.parentElement.classList.remove("_error"),e.classList.remove("_error")}function w(e){return!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,8})+$/.test(e.value)}_.addEventListener("submit",(function(e){e.preventDefault(),0===L(_)?(_.classList.add("_sending"),setTimeout((function(){console.log("sending ok!"),h(document.querySelector(".form-ok")),_.classList.remove("_sending"),_.reset()}),2e3)):h(document.querySelector(".form-error"))}));var E=document.getElementById("formImage"),q=document.getElementById("formPreview");E&&q&&E.addEventListener("change",(function(){!function(e){if(!["image/jpeg","image/png","image/gif"].includes(e.type))return alert("Разрешены только изображения!"),void(E.value="");if(e.size>2097152)return void alert("Файл должен быть менее 2мб.");var t=new FileReader;t.onload=function(e){q.innerHTML='<img src="'.concat(e.target.result,'" alt="Фото">')},t.onerror=function(e){alert("Ошибка")},t.readAsDataURL(e)}(E.files[0])})),document.addEventListener("click",(function(e){e.target.closest(".header__btn")&&window.scrollTo({top:k,behavior:"smooth"})}));var k=document.documentElement.clientHeight,b=document.querySelector(".header__top").clientHeight;document.querySelector(".header__body").style.marginTop="-".concat(b,"px")}));